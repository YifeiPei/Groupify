<script>
$(function() {
  $("table").sortable({
    items: 'tbody > tr',
    cursor: 'crosshair',
    connectWith: 'table',
    dropOnEmpty: true,
    receive: function(e, ui){
      $(this).find("tbody").append(ui.item);   
    }
  });
});
</script>

<div class="container">

<h1><%= @current_course.name %></h1>
<div >
    <%= form_tag('/class/sorted') do %>
      <%= submit_tag 'View List', class: "btn" %>
    <% end %>
  	</div>
<% for i in 1..@group_count 
    if i%2 == 1 %>

    <div class="row">
  <% end%>

    <div class="col-md-6">
      <h3>Group <%= i %></h3>
      <table class="table">
      <thead>
        <tr>
            <th>Student Number</th>
            <th>Name</th>
        </tr>
      </thead>
      <tbody>
      <% @students = Student.find(:all, :order => "group_id", :conditions => {:course_id => @current_course.id, :group_id => Group.find_by(:course_id => @current_course.id, :number => i).id}) %>
        <% @students.each do |student| %>
          <tr>
            <td><%= student.student_id %></td>
            <td><%= student.first_name %> <%= student.last_name %></td>
          </tr>
        <% end %>
      </tbody>
      </table>
    </div>
  <% if i%2 == 0 %>
    </div>
  <% end%>
<% end %>

  <% if @group_count%2 == 1 %>
    </div>
  <% end %>
</div>